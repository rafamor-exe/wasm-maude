load ../wasm-maude-semantics.maude .
rew run-module-func(
    (module
      (type "type0" (func (result i32)))
      (type "type1" (func (param i32) (result i32)))
      (func "start"
       (local i32)
        (
            i32 .const 5
            global.set "gb1"
            global.get "gb1"
            call "factorial"
            global.set "result"
        )
        end)
      (func "factorial" (type "type1")
       (local i32)
        (
            i32 .const 0
            local.get 0
            i32 . eq
            (if (type 0)
                i32 .const 1
            else
                local.get 0
                local.get 0
                i32 .const 1
                i32 . sub
                call "factorial"
                i32 . mul
            end)
        )
        end)
      (global "gb1" (mut i32) (i32 .const 1))
      (global "result" (mut i32) (i32 .const 1)))
    , "start") .